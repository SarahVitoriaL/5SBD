LOAD DATA INFILE 'C:/Users/sarah/Downloads/dados.csv'
INTO TABLE tempdata
FIELDS TERMINATED BY ',' ENCLOSED BY '"' LINES TERMINATED BY '\n';

------------------------------------------------------------------------ Tabela cliente -----------------------------------------------------------------------------------------

CREATE TABLE cliente (
    codigoComprador VARCHAR(50) PRIMARY KEY,
    email VARCHAR(255) NOT NULL,
    nomeComprador VARCHAR(255) NOT NULL,  
    endereco VARCHAR(255) NOT NULL,     
    CEP VARCHAR(10) NOT NULL,           
    UF CHAR(2) NOT NULL,               
    pais VARCHAR(100) NOT NULL         
);

CREATE UNIQUE INDEX idx_email ON cliente(email);

INSERT INTO `5sdb`.`cliente` (`codigoComprador`, `nomeComprador`, `email`, `endereco`, `CEP`, `UF`, `pais`)
SELECT DISTINCT `codigoComprador`, `nomeComprador`, `email`, `endereco`, `CEP`, `UF`, `pais`
FROM `5sdb`.`tempdata`
GROUP BY `codigoComprador`;

------------------------------------------------------------------------ Tabela produto -----------------------------------------------------------------------------------------

CREATE TABLE produto (
    SKU VARCHAR (50) PRIMARY KEY,
    UPC VARCHAR (50) NOT NULL,
    nomeProduto VARCHAR (255) NOT NULL,
    valor DECIMAL (10,2) NOT NULL
);

CREATE UNIQUE INDEX idx_upc ON produto(UPC);

INSERT INTO 5sdb . produto (SKU, UPC, nomeProduto, valor)
SELECT DISTINCT SKU, UPC, nomeProduto, valor
FROM 5sdb . tempdata
GROUP BY SKU;

------------------------------------------------------------------------ Tabela estoque -----------------------------------------------------------------------------------------

Tabela Estoque

------------------------------------------------------------------------ Tabela itemPedido -----------------------------------------------------------------------------------------

Tabela Entrega

INSERT INTO `5sdb`.`entrega` (`codigoPedido`, `valor`)
SELECT `codigoPedido`, valorPedido + fretePedido AS valor
FROM `5sdb`.`pedido`
ORDER BY `valor`DESC;

------------------------------------------------------------------------ Tabela pedido -----------------------------------------------------------------------------------------

------------------------------------------------------------------------ Tabela compra -----------------------------------------------------------------------------------------

CREATE TABLE compra ();

INSERT INTO `5sdb`.`compra` (`codigoComprador`, `codigoPedido`, `dataPedido`, `valorCompra`, `fretePedido`)
SELECT `codigoComprador`, `codigoPedido`, `dataPedido`, SUM(`valor`) AS valorCompra, SUM(`frete`)
FROM `5sdb`.`tempdata`
GROUP BY `codigoPedido`;
------------------------------------------------------------------------ Tabela entrega -----------------------------------------------------------------------------------------

